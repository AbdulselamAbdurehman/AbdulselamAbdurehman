---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Footer from "../../components/Footer.astro";

export async function getStaticPaths() {
  const blogEntries = await getCollection("blog");
  return blogEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout
  title={`${entry.data.title} | Abdulselam Abdurehman`}
  description={entry.data.description}
>
  <main class="min-h-screen py-20">
    <a
      href="/blog"
      class="text-blue-500 hover:text-blue-400 mb-8 inline-block transition-colors"
      >&larr; Back to Blog</a
    >

    <article class="prose prose-invert prose-lg max-w-3xl mx-auto">
      <header class="mb-10 not-prose">
        <h1
          class="text-4xl md:text-5xl font-bold text-slate-100 mb-4 leading-tight"
        >
          {entry.data.title}
        </h1>
        <div class="flex items-center gap-4 text-slate-500 text-sm">
          <time datetime={entry.data.pubDate.toISOString()}>
            {
              entry.data.pubDate.toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
                day: "numeric",
              })
            }
          </time>
          <span>â€¢</span>
          <span>{entry.data.tags?.join(", ")}</span>
        </div>
      </header>

      <div
        class="prose-headings:text-slate-200 prose-a:text-blue-400 hover:prose-a:text-blue-300 prose-strong:text-slate-100 prose-code:text-blue-300 prose-pre:bg-slate-900 prose-pre:border prose-pre:border-slate-800"
      >
        <Content />
      </div>
    </article>
  </main>
  <Footer />
</Layout>
